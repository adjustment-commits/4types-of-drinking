<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ALTIé£²é…’ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#e53935">
<link rel="apple-touch-icon" sizes="192x192" href="./image/icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="./image/icon-512.png">
<link rel="apple-touch-startup-image" href="./image/splash-2048x2732.png">

<style>
:root {
  --ink:#111;
  --radius:12px;
  --shadow:0 2px 6px rgba(0,0,0,0.15);
}
body {
  font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Noto Sans JP",sans-serif;
  color:var(--ink);
  background:#fafafa;
  margin:0;
  padding:20px;
  max-width:640px;
  margin:auto;
  transition:background 1s ease-in-out,color 1s ease;
}
h1{text-align:center;font-size:1.7em;margin:10px 0 20px;}
h2,h3{text-align:center;}
.question{margin:18px 0;}
button{
  display:block;width:100%;padding:12px;margin:15px 0;
  border:none;border-radius:var(--radius);font-size:1em;
  background:#e53935;color:#fff;box-shadow:var(--shadow);cursor:pointer;
}
.result{text-align:center;display:none;}
img{width:100%;max-width:320px;border-radius:10px;}
.desc{margin-top:10px;font-size:0.95em;line-height:1.6;}
#intakeInput{margin-top:20px;background:rgba(255,255,255,0.8);padding:12px;border-radius:10px;}
input[type="number"]{width:60px;}
.fade-in{opacity:0;transform:translateY(8px);animation:fadeUp 1.2s ease forwards;}
@keyframes fadeUp{to{opacity:1;transform:translateY(0);}}
.tips{background:#fff3e0;padding:10px;border-radius:8px;margin-top:15px;font-size:0.9em;}
.label-inline{display:inline-block;width:80px;}
</style>
</head>

<body>
<h1>ALTIé£²é…’ã‚¿ã‚¤ãƒ—è¨ºæ–­</h1>

<!-- è³ªå•ãƒ•ã‚©ãƒ¼ãƒ  -->
<div id="quiz">
  <form id="altiForm">
    <div class="question"><p>1. ãŠé…’ã‚’é£²ã‚“ã§10åˆ†ä»¥å†…ã«é¡”ãŒèµ¤ããªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
      <label><input type="radio" name="q1" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q1" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>2. ãƒ“ãƒ¼ãƒ«1æ¯ã§ã‚‚å‹•æ‚¸ã‚„æ¯è‹¦ã—ã•ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
      <label><input type="radio" name="q2" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q2" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>3. å°‘é‡ã§ã‚‚ä½“ãŒç†±ããªã‚Šã€æ‰‹è¶³ãŒã»ã¦ã‚‹ã€‚</p>
      <label><input type="radio" name="q3" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q3" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>4. ç¿Œæœã€é ­ç—›ã‚„å€¦æ€ æ„ŸãŒæ®‹ã‚‹ã“ã¨ãŒå¤šã„ã€‚</p>
      <label><input type="radio" name="q4" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q4" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>5. ãŠé…’ã‚’é£²ã‚“ã å¤œã¯çœ ã‚ŠãŒæµ…ããªã‚Šã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q5" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q5" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>6. ãŠé…’ã‚’é£²ã‚“ã ç¿Œæ—¥ã€é›†ä¸­åŠ›ãŒè½ã¡ã‚‹ã€‚</p>
      <label><input type="radio" name="q6" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q6" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>7. å‘¨ã‚Šã®ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«å¼•ã£å¼µã‚‰ã‚Œã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q7" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q7" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>8. æ–­ã‚‹ã‚ˆã‚Šã‚‚ã€Œå°‘ã—ã ã‘é£²ã‚‚ã†ã€ã¨æ€ã£ã¦ã—ã¾ã†ã€‚</p>
      <label><input type="radio" name="q8" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q8" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>9. é£²ã¿ä¼šã§ã¯é™ã‹ã‚ˆã‚Šã‚‚ç››ã‚Šä¸ŠãŒã£ã¦ã„ãŸã„ã€‚</p>
      <label><input type="radio" name="q9" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q9" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>10. ãŠé…’ã‚’é£²ã‚€ã¨æ°—åˆ†ãŒé«˜æšã—ã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q10" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q10" value="cool"> ã„ã„ãˆ</label></div>

    <h3>â–¼ ä»Šæ—¥ã®ä½“èª¿</h3>
    <label><input type="radio" name="cond" value="1.2"> çµ¶å¥½èª¿</label>
    <label><input type="radio" name="cond" value="1.0"> æ™®é€š</label>
    <label><input type="radio" name="cond" value="0.8"> ç–²åŠ´æ°—å‘³</label>

    <h3>â–¼ é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰</h3>
    <label><input type="checkbox" id="partyMode"> é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰ONï¼ˆ+50%ï¼‰</label>

    <button type="button" onclick="showResult()">è¨ºæ–­ã™ã‚‹</button>
  </form>
</div>

<!-- çµæœ -->
<div class="result" id="result">
  <h2 id="typeName"></h2>
  <img id="typeImg" src="" alt="è¨ºæ–­çµæœç”»åƒ">
  <p class="desc" id="typeDesc"></p>
  <p id="doseResult" class="desc"></p>
  <div class="tips" id="advice"></div>

  <div id="intakeInput" class="fade-in">
    <h3>ğŸ¶ ä»Šæ—¥ã®äºˆå®šã‚’å…¥åŠ›ã—ã¦ã¿ã‚ˆã†</h3>
    <p style="font-size:0.9em;color:#555;">
      ç›®å®‰ï¼šãƒ“ãƒ¼ãƒ«500mlï¼20gï¼é…ãƒã‚¤350mlï¼20gï¼ãƒã‚¤ãƒœãƒ¼ãƒ«ï¼20gï¼æ—¥æœ¬é…’1åˆï¼22gï¼ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼1æ¯ï¼19g
    </p>
    <div>ğŸº ãƒ“ãƒ¼ãƒ«ï¼š<input type="number" id="beer" min="0" step="1" value="0"> æœ¬ã€€
    ğŸ¹ é…ãƒã‚¤ï¼š<input type="number" id="chu" min="0" step="1" value="0"> ç¼¶</div>
    <div>ğŸ¥ƒ ãƒã‚¤ãƒœãƒ¼ãƒ«ï¼š<input type="number" id="high" min="0" step="1" value="0"> æ¯ã€€
    ğŸ¶ æ—¥æœ¬é…’ï¼š<input type="number" id="sake" min="0" step="1" value="0"> åˆã€€
    ğŸŸ¤ ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ï¼š<input type="number" id="whisky" min="0" step="1" value="0"> æ¯</div>
    <button type="button" onclick="calcTotalIntake()">åˆè¨ˆã‚’åˆ¤å®šã™ã‚‹</button>
    <p id="intakeResult" class="desc"></p>
  </div>

  <button onclick="restart()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
</div>

<script>
const alcoholTable={beer:20,chu:20,high:20,sake:22,whisky:19};

function showResult(){
  const answers=document.querySelectorAll('input[type=radio]:checked');
  const cond=document.querySelector('input[name=cond]:checked');
  if(answers.length<10 || !cond){alert("å…¨ã¦ã®è³ªå•ã¨ä½“èª¿ã‚’é¸ã‚“ã§ãã ã•ã„");return;}

  let score={slow:0,fast:0,emo:0,cool:0};
  answers.forEach(a=>score[a.value]++);
  const axis1=score.slow>score.fast?"slow":"fast";
  const axis2=score.emo>score.cool?"emo":"cool";
  const type=axis1+"-"+axis2;

  const data={
    "slow-emo":{name:"ğŸ”¥Slow-Emoï¼ˆæ„Ÿæƒ…ã‚¸ã‚§ãƒƒãƒˆå‹ï¼‰",img:"image/slow-emo.png",desc:"æ„Ÿæƒ…ã§ç‡ƒãˆã‚‹ã‚¿ã‚¤ãƒ—ã€‚",base:30,bg:"linear-gradient(135deg,#f57c00,#ffe082)",advice:"ğŸ”¥ æ°´åˆ†ã‚’ã“ã¾ã‚ã«å–ã£ã¦ã€æ²¹ã‚‚ã®ã¯æ§ãˆã‚ã«ãƒ¯ãƒ³ï¼"},
    "fast-emo":{name:"âš¡Fast-Emoï¼ˆç¤¾äº¤ã‚¿ãƒ¼ãƒœå‹ï¼‰",img:"image/fast-emo.png",desc:"ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã§çªãæŠœã‘ã‚‹ã‚¿ã‚¤ãƒ—ã€‚",base:40,bg:"linear-gradient(135deg,#ffb300,#bbdefb)",advice:"âš¡ ç››ã‚Šä¸ŠãŒã‚Šã™ãæ³¨æ„ï¼é–“ã«ãŠæ°´ã‚’ã¯ã•ã‚‚ã†ï¼"},
    "fast-cool":{name:"â„ï¸Fast-Coolï¼ˆç†æ€§ã‚¹ãƒ—ãƒªãƒ³ãƒˆå‹ï¼‰",img:"image/fast-cool.png",desc:"ä»£è¬ãŒé€Ÿãå†·é™ãªã‚¿ã‚¤ãƒ—ã€‚",base:45,bg:"linear-gradient(135deg,#4a6572,#cfd8dc)",advice:"â„ï¸ ãƒ‡ãƒ¼ã‚¿é€šã‚Šã§ã‚‚æ²¹æ–­ç¦ç‰©ã€‚æ°´ã§ãƒªã‚»ãƒƒãƒˆã ã€‚"},
    "slow-cool":{name:"ğŸŒ¿Slow-Coolï¼ˆæ…é‡ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å‹ï¼‰",img:"image/slow-cool.png",desc:"ç©ã‚„ã‹ã§å®‰å®šã—ãŸã‚¿ã‚¤ãƒ—ã€‚",base:35,bg:"linear-gradient(135deg,#81c784,#e8f5e9)",advice:"ğŸŒ¿ ã‚†ã£ãã‚Šæ¥½ã—ã‚‚ã†ã€‚ãŠã¤ã¾ã¿ã¯ã‚ã£ã•ã‚Šç³»ãŒãŠã™ã™ã‚ã€‚"}
  };

  const info=data[type];
  const condition=parseFloat(cond.value);
  const party=document.getElementById("partyMode").checked?1.5:1.0;
  const grams=Math.round(info.base*condition*party);

  document.body.style.background=info.bg;
  document.getElementById("typeName").textContent=info.name;
  document.getElementById("typeImg").src=info.img;
  document.getElementById("typeDesc").textContent=info.desc;
  document.getElementById("doseResult").innerHTML=`ä»Šæ—¥ã®å®‰å…¨ç›®å®‰ï¼š<b>${grams}gï¼ˆç´”ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ï¼‰</b>`;
  document.getElementById("advice").textContent=info.advice;

  window.lastDose={grams};
  window.lastMood=axis2;

  document.getElementById("quiz").style.display="none";
  document.getElementById("result").style.display="block";
}

function calcTotalIntake(){
  let total=0;
  for(let key in alcoholTable){
    total+=alcoholTable[key]*(parseFloat(document.getElementById(key).value)||0);
  }
  const safe=window.lastDose?window.lastDose.grams:20;
  const ratio=(total/safe).toFixed(1);
  let msg="",color="";
  if(total<=safe){
    msg=`ğŸ€ åˆè¨ˆ ${total.toFixed(0)}gï¼ˆ${ratio}å€ï¼‰ â†’ ç†æƒ³çš„ã§ã™ï¼`;
    color="#2e7d32";
  }else if(total<=safe*1.5){
    msg=`âš ï¸ ${total.toFixed(0)}gï¼ˆ${ratio}å€ï¼‰â†’ å°‘ã—ã‚ªãƒ¼ãƒãƒ¼ã€‚æ°´ã‚’å¤šã‚ã«ï¼`;
    color="#f9a825";
  }else{
    msg=`ğŸš« ${total.toFixed(0)}gï¼ˆ${ratio}å€ï¼‰â†’ é£²ã¿ã™ãæ³¨æ„ï¼ä½“ã‚’ã„ãŸã‚ã‚ã†ã€‚`;
    color="#c62828";
  }
  const out=document.getElementById("intakeResult");
  out.style.color=color;
  out.innerHTML=msg;
}

function restart(){
  document.body.style.background="#fafafa";
  document.getElementById("quiz").style.display="block";
  document.getElementById("result").style.display="none";
  document.querySelectorAll('input[type=radio],input[type=checkbox]').forEach(el=>el.checked=false);
  ['beer','chu','high','sake','whisky'].forEach(id=>document.getElementById(id).value=0);
}
</script>
</body>
</html>
