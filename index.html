<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ALTIé£²é…’ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
<meta name="theme-color" content="#e53935">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" sizes="192x192" href="./image/icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="./image/icon-512.png">
<style>
:root {--ink:#111; --radius:12px; --shadow:0 2px 6px rgba(0,0,0,0.15);}
body {
  font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Noto Sans JP",sans-serif;
  color:var(--ink); background:#fafafa;
  margin:0; padding:20px; max-width:640px; margin:auto;
  transition:background 1s ease-in-out,color 1s ease;
}
h1{text-align:center;font-size:1.7em;margin:10px 0 20px;}
button{
  display:block;width:100%;padding:12px;margin:15px 0;
  border:none;border-radius:var(--radius);font-size:1em;
  background:#e53935;color:#fff;box-shadow:var(--shadow);cursor:pointer;
}
.question{margin:18px 0;}
.result{text-align:center;display:none;}
img{width:100%;max-width:320px;border-radius:10px;}
.desc{margin-top:10px;font-size:0.95em;line-height:1.6;}
#intakeInput{margin-top:20px;background:rgba(255,255,255,0.85);padding:12px;border-radius:10px;}
input{margin:4px;}
.drinkRow{margin:6px 0;}
.fade-in{opacity:0;transform:translateY(8px);animation:fadeUp 1.2s ease forwards;}
@keyframes fadeUp{to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>

<h1>ALTIé£²é…’ã‚¿ã‚¤ãƒ—è¨ºæ–­</h1>

<div id="quiz">
  <form id="altiForm">

    <!-- ä½“èª¿ -->
    <div class="question">
      <p>ä»Šæ—¥ã®ä½“èª¿ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
      <label><input type="radio" name="condition" value="good"> çµ¶å¥½èª¿</label>
      <label><input type="radio" name="condition" value="normal" checked> æ™®é€š</label>
      <label><input type="radio" name="condition" value="tired"> ç–²åŠ´æ°—å‘³</label>
    </div>

    <!-- é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰ -->
    <div class="question">
      <p>ä»Šæ—¥ã¯é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰ï¼Ÿ</p>
      <label><input type="checkbox" id="partyMode"> ğŸ» é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰ON</label>
    </div>

    <!-- è³ªå• -->
    <div class="question"><p>1. ãŠé…’ã‚’é£²ã‚“ã§10åˆ†ä»¥å†…ã«é¡”ãŒèµ¤ããªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
      <label><input type="radio" name="q1" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q1" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>2. ãƒ“ãƒ¼ãƒ«1æ¯ã§ã‚‚å‹•æ‚¸ã‚„æ¯è‹¦ã—ã•ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
      <label><input type="radio" name="q2" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q2" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>3. å°‘é‡ã§ã‚‚ä½“ãŒç†±ããªã‚Šã€æ‰‹è¶³ãŒã»ã¦ã‚‹ã€‚</p>
      <label><input type="radio" name="q3" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q3" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>4. ç¿Œæœã€é ­ç—›ã‚„å€¦æ€ æ„ŸãŒæ®‹ã‚‹ã“ã¨ãŒå¤šã„ã€‚</p>
      <label><input type="radio" name="q4" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q4" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>5. ãŠé…’ã‚’é£²ã‚“ã å¤œã¯çœ ã‚ŠãŒæµ…ããªã‚Šã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q5" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q5" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>6. ãŠé…’ã‚’é£²ã‚“ã ç¿Œæ—¥ã€é›†ä¸­åŠ›ãŒè½ã¡ã‚‹ã€‚</p>
      <label><input type="radio" name="q6" value="slow"> ã¯ã„</label>
      <label><input type="radio" name="q6" value="fast"> ã„ã„ãˆ</label></div>
    <div class="question"><p>7. å‘¨ã‚Šã®ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«å¼•ã£å¼µã‚‰ã‚Œã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q7" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q7" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>8. æ–­ã‚‹ã‚ˆã‚Šã‚‚ã€Œå°‘ã—ã ã‘é£²ã‚‚ã†ã€ã¨æ€ã£ã¦ã—ã¾ã†ã€‚</p>
      <label><input type="radio" name="q8" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q8" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>9. é£²ã¿ä¼šã§ã¯é™ã‹ã‚ˆã‚Šã‚‚ç››ã‚Šä¸ŠãŒã£ã¦ã„ãŸã„ã€‚</p>
      <label><input type="radio" name="q9" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q9" value="cool"> ã„ã„ãˆ</label></div>
    <div class="question"><p>10. ãŠé…’ã‚’é£²ã‚€ã¨æ°—åˆ†ãŒé«˜æšã—ã‚„ã™ã„ã€‚</p>
      <label><input type="radio" name="q10" value="emo"> ã¯ã„</label>
      <label><input type="radio" name="q10" value="cool"> ã„ã„ãˆ</label></div>

    <button type="button" onclick="showResult()">è¨ºæ–­ã™ã‚‹</button>
  </form>
</div>

<div class="result" id="result">
  <h2 id="typeName"></h2>
  <img id="typeImg" src="" alt="è¨ºæ–­çµæœç”»åƒ">
  <p class="desc" id="typeDesc"></p>
  <p class="desc" id="drinkGuide"></p>
  <p class="desc" id="charAdvice" style="font-weight:bold;"></p>

  <button onclick="restart()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
</div>
  
<style>
  /* â–¼ é€šå¸¸æ™‚èƒŒæ™¯ */
  body.default-mode {
    background: #fafafa;
    transition: background 1s ease-in-out;
  }

  /* â–¼ é£²ã¿ä¼šãƒ¢ãƒ¼ãƒ‰èƒŒæ™¯ï¼ˆãƒã‚ªãƒ³ï¼‰ */
  body.party-mode {
    background: linear-gradient(135deg, #ff4081, #7c4dff, #448aff);
    background-size: 400% 400%;
    animation: partyGlow 8s ease infinite;
    color: #fff;
  }

  @keyframes partyGlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .neon-title {
    text-shadow: 0 0 10px #fff, 0 0 20px #ff4081, 0 0 40px #ff4081;
  }

  .neon-border {
    border: 2px solid rgba(255,255,255,0.3);
    box-shadow: 0 0 10px rgba(255,255,255,0.3);
  }
</style>
  
<script>
const baseDose = {
  "slow-emo": 30,
  "fast-emo": 40,
  "fast-cool": 45,
  "slow-cool": 35
};
const advice = {
  "slow-emo": "ğŸ”¥ ç†±ããªã‚Šã™ãæ³¨æ„ï¼æ°´ã‚‚ä¸€ç·’ã«é£²ã‚‚ã†ï¼",
  "fast-emo": "âš¡ ãƒãƒªæœ€é«˜ï¼æ²¹ã‚‚ã®ã¯æ§ãˆã‚ã«ã­ï¼",
  "fast-cool": "â„ï¸ ç†æ€§çš„ãªã‚ãªãŸã€ä»Šæ—¥ã¯å°‘ã—æ°—ã‚’æŠœã„ã¦ã‚‚OKï¼",
  "slow-cool": "ğŸŒ¿ ã‚†ã£ãã‚Šå‘³ã‚ãŠã†ã€‚ã¬ã‚‹ã‚ã®é…’ãŒåˆã†å¤œã ã­ã€‚"
};
const alcoholTable = { beer: 20, chu: 20, high: 20, sake: 22, whisky: 19 };

function showResult() {
  const answers = document.querySelectorAll('input[type=radio]:checked');
  if (answers.length < 12) {
    alert("ã™ã¹ã¦ã®é …ç›®ã«ç­”ãˆã¦ãã ã•ã„");
    return;
  }
  let score = { slow: 0, fast: 0, emo: 0, cool: 0 };
  answers.forEach(a => { if (a.name.startsWith("q")) score[a.value]++; });
  const axis1 = score.slow > score.fast ? "slow" : "fast";
  const axis2 = score.emo > score.cool ? "emo" : "cool";
  const type = axis1 + "-" + axis2;

  const cond = document.querySelector('input[name="condition"]:checked').value;
  const condRate = cond === "good" ? 1.2 : cond === "tired" ? 0.8 : 1.0;
  const modeRate = document.getElementById("partyMode").checked ? 1.5 : 1.0;
  // ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ONæ™‚ã®æ¼”å‡º
if (document.getElementById("partyMode").checked) {
  document.body.classList.add("party-mode");
  document.body.classList.remove("default-mode");
  document.querySelector("h1").classList.add("neon-title");
} else {
  document.body.classList.remove("party-mode");
  document.body.classList.add("default-mode");
  document.querySelector("h1").classList.remove("neon-title");
}
  const total = Math.round(baseDose[type] * condRate * modeRate);

  const beer = Math.ceil(total / 20);
  const chu = Math.ceil(total / 20);
  const high = Math.ceil(total / 20);
  const sake = Math.ceil(total / 22);
  const whisky = Math.ceil(total / 19);

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("typeName").textContent = `${type.toUpperCase()}ã‚¿ã‚¤ãƒ—`;
  document.getElementById("typeImg").src = `image/${type}.png`;
  document.getElementById("typeDesc").textContent = `ä»Šæ—¥ã®å®‰å…¨é£²é…’é‡ç›®å®‰ï¼š${total}g`;
  document.getElementById("drinkGuide").innerHTML = `
    ğŸºãƒ“ãƒ¼ãƒ«:${beer}æœ¬ã€€ğŸ¹é…ãƒã‚¤:${chu}ç¼¶ã€€ğŸ¥ƒãƒã‚¤ãƒœãƒ¼ãƒ«:${high}æ¯<br>
    ğŸ¶æ—¥æœ¬é…’:${sake}åˆã€€ğŸŸ¤ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼:${whisky}æ¯
  `;
  document.getElementById("charAdvice").innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:10px;justify-content:center;margin-top:10px;">
      <img src="image/${type}.png" alt="${type}" style="width:90px;height:auto;border-radius:10px;">
      <div style="background:#fff;border-radius:10px;padding:10px 14px;max-width:70%;box-shadow:0 2px 5px rgba(0,0,0,0.15);text-align:left;">
        ${advice[type]}
      </div>
    </div>
  `;

  // äºˆå®šå…¥åŠ›æ¬„ã‚’ã‚»ãƒƒãƒˆ
  const planBox = document.getElementById("planInput");
  planBox.innerHTML = `
    <h3>ğŸ¶ ä»Šæ—¥ã®äºˆå®šã‚’å…¥åŠ›ã—ã¦ã¿ã‚ˆã†</h3>
    <div>ğŸº ãƒ“ãƒ¼ãƒ«ï¼š<input type="number" id="beer" min="0" step="1" value="0"> æœ¬ã€€
    ğŸ¹ é…ãƒã‚¤ï¼š<input type="number" id="chu" min="0" step="1" value="0"> ç¼¶</div>
    <div>ğŸ¥ƒ ãƒã‚¤ãƒœãƒ¼ãƒ«ï¼š<input type="number" id="high" min="0" step="1" value="0"> æ¯ã€€
    ğŸ¶ æ—¥æœ¬é…’ï¼š<input type="number" id="sake" min="0" step="1" value="0"> åˆã€€
    ğŸŸ¤ ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ï¼š<input type="number" id="whisky" min="0" step="1" value="0"> æ¯</div>
    <button type="button" onclick="calcTotalIntake('${type}', ${total})">åˆè¨ˆã§åˆ¤å®šã™ã‚‹</button>
    <p id="intakeResult" class="desc"></p>
  `;
}

function calcTotalIntake(type, safe) {
  let total = 0;
  for (let key in alcoholTable) {
    const val = parseFloat(document.getElementById(key).value) || 0;
    total += alcoholTable[key] * val;
  }

  const result = document.getElementById("intakeResult");
  let msg = "";
  let color = "";

  if (total <= safe) {
    msg = `ğŸ€ ç†æƒ³çš„ï¼åˆè¨ˆ ${total}gã€‚æ¥½ã—ã¿ãªãŒã‚‰å¥åº·çš„ï¼`;
    color = "#2e7d32";
  } else if (total <= safe * 1.5) {
    msg = `âš ï¸ å°‘ã—å¤šã‚ï¼ˆ${total}gï¼‰ã€‚ä»Šå¤œã¯ã‚†ã£ãã‚Šãƒšãƒ¼ã‚¹ã§ï¼`;
    color = "#f9a825";
  } else {
    msg = `ğŸš« åˆè¨ˆ ${total}gã€‚ä»Šæ—¥ã¯ã‚»ãƒ¼ãƒ–ã—ã‚ˆã†ï¼`;
    color = "#c62828";
  }

  result.style.color = color;
  result.innerHTML = msg + `<br><small>ï¼ˆæ¨å¥¨ä¸Šé™ ${safe}gï¼‰</small>`;

  // ã‚­ãƒ£ãƒ©ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°
  const reaction = document.getElementById("charAdvice");
  let reactMsg =
    total <= safe
      ? "ã„ã„ãƒšãƒ¼ã‚¹ã ã­ï¼ã“ã®èª¿å­ï¼"
      : total <= safe * 1.5
      ? "å°‘ã—æŠ‘ãˆã¦ã„ã“ã†ã‹ã€‚"
      : "ã¡ã‚‡ã£ã¨ã‚„ã‚Šã™ãï¼ãƒ–ãƒ¬ãƒ¼ã‚­ã ï¼";
  reaction.innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:10px;justify-content:center;margin-top:10px;">
      <img src="image/${type}.png" alt="${type}" style="width:90px;height:auto;border-radius:10px;">
      <div style="background:#fff;border-radius:10px;padding:10px 14px;max-width:70%;box-shadow:0 2px 5px rgba(0,0,0,0.15);text-align:left;">
        ${reactMsg}
      </div>
    </div>
  `;
}

function restart() {
  document.getElementById("result").style.display = "none";
  document.getElementById("quiz").style.display = "block";
  document.querySelectorAll('input[type=radio]').forEach(el => (el.checked = false));
  document.getElementById("partyMode").checked = false;
}
</script>
  
</body>
</html>
